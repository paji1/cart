function showNotification(e,o,t,n){t=t||!1,n=n||null,e||(e="Unknown error has occured. Check inputs."),$("#notify_message").removeClass(),$("#notify_message").addClass("alert-"+o),$("#notify_message").html(e),$("#notify_message").slideDown(600).delay(2500).slideUp(600,function(){n&&(window.location=n),!0===t&&location.reload()})}function slugify(e){return $.trim(e).replace(/[^a-z0-9-æøå]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").replace(/æ/gi,"ae").replace(/ø/gi,"oe").replace(/å/gi,"a").toLowerCase()}$(document).ready(function(){if($("#stripe-form").length>0){var e=Stripe($("#stripePublicKey").val()),o=e.elements().create("card",{style:{hidePostalCode:!0,base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}});o.mount("#card-element"),$(document).on("submit","#stripe-payment-form",function(t){t.preventDefault(),e.createToken(o).then(function(e){e.error?(console.log("Stripe err",e.error),showNotification("Failed to complete transaction","danger",!0)):$.ajax({type:"POST",url:"/stripe/checkout_action",data:{token:e.token.id}}).done(e=>{window.location="/payment/"+e.paymentId}).fail(e=>{console.log("Stripe err",e.error),window.location="/payment/"+e.paymentId})})})}$("#checkoutInstore").validator().on("click",function(e){e.preventDefault(),$.ajax({type:"POST",url:"/instore/checkout_action"}).done(e=>{window.location="/payment/"+e.paymentId}).fail(e=>{window.location="/payment/"+e.paymentId})}),$("#dropin-container").length>0&&$.ajax({method:"POST",url:"/adyen/setup"}).done(async function(e){const o={environment:e.environment,clientKey:e.clientKey,session:{id:e.paymentsResponse.id,sessionData:e.paymentsResponse.sessionData},onPaymentCompleted:(e,o)=>{0===$("#shipping-form").validator("validate").has(".has-error").length&&$.ajax({type:"POST",url:"/adyen/checkout_action",data:{paymentCode:e.resultCode,paymentId:o._id}}).done(e=>{window.location="/payment/"+e.paymentId}).fail(e=>{showNotification("Failed to complete transaction","danger",!0)})},onError:(e,o)=>{console.log(e.name,e.message,e.stack,o)},paymentMethodsConfiguration:{hasHolderName:!1,holderNameRequired:!1,billingAddressRequired:!1}};(await AdyenCheckout(o)).create("dropin").mount("#dropin-container")}).fail(function(e){showNotification(e.responseJSON.message,"danger")}),$("#zip-checkout").length>0&&Zip.Checkout.attachButton("#zip-checkout",{checkoutUri:"/zip/setup",onComplete:function(e){"approved"===e.state?$.ajax({type:"POST",url:"/zip/charge",data:{checkoutId:e.checkoutId}}).done(e=>{window.location="/payment/"+e.paymentId}).fail(e=>{showNotification("Failed to complete transaction","danger",!0)}):window.location="/zip/return?result="+e.state},onError:function(e){window.location="/zip/return?result=cancelled"}})});