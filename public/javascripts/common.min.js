function showNotification(e,a,o,n){o=o||!1,n=n||null,e||(e="Unknown error has occured. Check inputs."),$("#notify_message").removeClass(),$("#notify_message").addClass("alert-"+a),$("#notify_message").html(e),$("#notify_message").slideDown(600).delay(2500).slideUp(600,function(){n&&(window.location=n),!0===o&&location.reload()})}function slugify(e){return $.trim(e).replace(/[^a-z0-9-æøå]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").replace(/æ/gi,"ae").replace(/ø/gi,"oe").replace(/å/gi,"a").toLowerCase()}$(document).ready(function(){if($("#stripe-form").length>0){var e=Stripe($("#stripePublicKey").val()),a=e.elements().create("card",{style:{hidePostalCode:!0,base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}});a.mount("#card-element"),$(document).on("submit","#stripe-payment-form",function(o){o.preventDefault(),e.createToken(a).then(function(e){e.error?showNotification("Failed to complete transaction","danger",!0):$.ajax({type:"POST",url:"/stripe/checkout_action",data:{token:e.token.id}}).done(e=>{window.location="/payment/"+e.paymentId}).fail(e=>{window.location="/payment/"+e.paymentId})})})}$("#checkoutInstore").validator().on("click",function(e){e.preventDefault(),$.ajax({type:"POST",url:"/instore/checkout_action"}).done(e=>{window.location="/payment/"+e.paymentId}).fail(e=>{window.location="/payment/"+e.paymentId})}),$("#adyen-dropin").length>0&&$.ajax({method:"POST",url:"/adyen/setup"}).done(function(e){const a={locale:"en-AU",environment:e.environment.toLowerCase(),originKey:e.originKey,paymentMethodsResponse:e.paymentsResponse};new AdyenCheckout(a).create("dropin",{paymentMethodsConfiguration:{card:{hasHolderName:!1,holderNameRequired:!1,enableStoreDetails:!1,groupTypes:["mc","visa"],name:"Credit or debit card"}},onSubmit:(e,a)=>{0===$("#shipping-form").validator("validate").has(".has-error").length&&$.ajax({type:"POST",url:"/adyen/checkout_action",data:{shipEmail:$("#shipEmail").val(),shipCompany:$("#shipCompany").val(),shipFirstname:$("#shipFirstname").val(),shipLastname:$("#shipLastname").val(),shipAddr1:$("#shipAddr1").val(),shipAddr2:$("#shipAddr2").val(),shipCountry:$("#shipCountry").val(),shipState:$("#shipState").val(),shipPostcode:$("#shipPostcode").val(),shipPhoneNumber:$("#shipPhoneNumber").val(),payment:JSON.stringify(e.data.paymentMethod)}}).done(e=>{window.location="/payment/"+e.paymentId}).fail(e=>{showNotification("Failed to complete transaction","danger",!0)})}}).mount("#adyen-dropin")}).fail(function(e){showNotification(e.responseJSON.message,"danger")})});